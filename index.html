<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–° 23 —Ñ–µ–≤—Ä–∞–ª—è, –ó–∞—â–∏—Ç–Ω–∏–∫! ‚ù§Ô∏è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(145deg, #0a0f1e 0%, #1a1f2f 100%);
            min-height: 100dvh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            margin: 0;
            color: #fff;
        }

        .game-container {
            background: rgba(20, 25, 40, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 48px;
            padding: 24px 20px 32px;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 70, 120, 0.2);
            border: 1px solid rgba(255, 100, 150, 0.3);
            transition: all 0.3s ease;
        }

        /* –®—É—Ç–∫–∞ –ø—Ä–æ –ª—ã—Å–æ–≥–æ */
        .joke-title {
            text-align: center;
            font-size: 28px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 16px;
            color: #ffb2c8;
            text-shadow: 0 0 10px #ff4d7a, 2px 2px 0 #2d1b2e;
            word-break: break-word;
        }
        .joke-title span {
            display: inline-block;
            transform: scale(-1, 1);
            font-size: 32px;
            filter: drop-shadow(0 0 6px gold);
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress-section {
            margin-bottom: 28px;
            text-align: center;
        }
        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
            font-weight: 600;
            color: #ffb6d1;
            margin-bottom: 6px;
        }
        .progress-bar-bg {
            background: #232a3a;
            height: 24px;
            border-radius: 100px;
            padding: 3px;
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.8);
            border: 1px solid #ff4d6d55;
        }
        .progress-fill {
            background: linear-gradient(90deg, #ff7eb3, #ff4d6d);
            height: 100%;
            border-radius: 100px;
            width: 0%;
            transition: width 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 12px #ff4d6d;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 14px;
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px black;
            overflow: hidden;
        }
        .progress-fill span {
            z-index: 2;
            margin-right: 4px;
        }

        /* –û—á–∫–∏ */
        .score-area {
            text-align: center;
            margin-bottom: 20px;
            font-size: 22px;
            background: #0f1422cc;
            padding: 12px;
            border-radius: 60px;
            border: 1px solid #ff90b0;
            box-shadow: inset 0 0 10px #ff2e5b33;
            font-weight: bold;
            letter-spacing: 1px;
        }
        .score-value {
            color: #ffea9f;
            font-size: 42px;
            font-weight: 900;
            margin-left: 8px;
            text-shadow: 0 0 15px #ffb347;
        }

        /* –°–µ—Ä–¥—Ü–µ = –ö–Ω–æ–ø–∫–∞ */
        .heart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 24px 0 16px;
            filter: drop-shadow(0 10px 20px #ff2d5a80);
            cursor: pointer;
            transition: transform 0.1s ease;
            -webkit-tap-highlight-color: transparent;
        }
        .heart-container:active {
            transform: scale(0.95);
        }

        .pixel-heart {
            width: 180px;
            height: 180px;
            background-color: #ff2d5a;
            position: relative;
            transform: rotate(45deg);
            box-shadow: 0 0 0 4px #ffb6d9, 0 0 0 8px #ff2d5a55, 0 0 30px 10px #ff4d6d;
            transition: width 0.2s, height 0.2s, box-shadow 0.2s, background-color 0.2s;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border-radius: 0; /* –ü–∏–∫—Å–µ–ª—å–Ω–æ—Å—Ç—å */
        }
        /* –°–æ–∑–¥–∞–µ–º –ø–∏–∫—Å–µ–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —á–µ—Ä–µ–∑ before/after (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ –∏–∑ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤) */
        .pixel-heart::before,
        .pixel-heart::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: inherit;
            border-radius: 0;
            box-shadow: inherit;
        }
        .pixel-heart::before {
            left: -50%;
            top: 0;
        }
        .pixel-heart::after {
            top: -50%;
            left: 0;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ —à–∫–∞–ª—ã (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ + —Ç—Ä—è—Å–∫–∞) */
        .heart-pulse {
            animation: heartPulse 0.2s ease-out;
        }
        @keyframes heartPulse {
            0% { transform: rotate(45deg) scale(1); }
            50% { transform: rotate(45deg) scale(1.2); filter: brightness(1.4); }
            100% { transform: rotate(45deg) scale(1); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –∏ –±–ª–µ—Å—Ç–æ–∫ –ø—Ä–∏ –ø–æ–±–µ–¥–µ */
        .heart-win {
            animation: winSpin 0.8s infinite linear, sparkle 0.6s infinite alternate !important;
        }
        @keyframes winSpin {
            0% { transform: rotate(45deg) rotateY(0deg); }
            100% { transform: rotate(45deg) rotateY(360deg); }
        }
        @keyframes sparkle {
            0% { box-shadow: 0 0 0 4px #fffacd, 0 0 0 8px #ffdb58, 0 0 30px 15px gold; opacity: 1; }
            100% { box-shadow: 0 0 0 4px #ffb6d9, 0 0 0 8px #ff69b4, 0 0 50px 25px #ffd700; opacity: 1; background-color: #ff69b4; }
        }

        /* –°–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ) */
        .secret-message {
            margin-top: 30px;
            background: #1d2333dd;
            border: 2px dashed #ffb3c6;
            border-radius: 42px;
            padding: 24px 18px;
            text-align: center;
            backdrop-filter: blur(4px);
            transition: opacity 0.5s, transform 0.4s;
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }
        .secret-message.show {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        .congrats-title {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(45deg, #fee3b8, #ffb6c1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .main-text {
            font-size: 20px;
            line-height: 1.5;
            color: #ffe4ec;
            margin: 16px 0;
        }
        .main-text strong {
            color: #ffc857;
            font-size: 24px;
            display: block;
            margin: 6px 0;
        }

        .kiss-btn {
            background: #ff2d5a;
            border: none;
            color: white;
            font-size: 28px;
            font-weight: bold;
            padding: 18px 24px;
            border-radius: 60px;
            margin: 16px 0 8px;
            width: 100%;
            box-shadow: 0 10px 0 #941c36, 0 5px 20px #ff9eb5;
            transition: 0.05s linear;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .kiss-btn:active {
            transform: translateY(8px);
            box-shadow: 0 2px 0 #941c36, 0 5px 20px #ff9eb5;
        }
        .kiss-output {
            font-size: 40px;
            line-height: 1.4;
            min-height: 70px;
            letter-spacing: 6px;
        }

        .small-note {
            color: #a7b6d0;
            font-size: 15px;
            margin-top: 12px;
        }

        footer {
            margin-top: 24px;
            color: #627094;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- –®—É—Ç–∫–∞ –ø—Ä–æ –ª—ã—Å–æ–≥–æ -->
        <div class="joke-title">
            <span>ü™ñ</span> –û–û–û, –ê –ö–¢–û –õ–´–°–´–ú –ë–´–õ? <span>üçº</span>
        </div>

        <!-- –®–∫–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
        <div class="progress-section">
            <div class="progress-label">
                <span>‚ù§Ô∏è‚Äçüî• –ù–∞–ø–æ–ª–Ω—è–µ–º –ª—é–±–æ–≤—å—é</span>
                <span id="progress-counter">0/1000</span>
            </div>
            <div class="progress-bar-bg">
                <div id="progress-fill" class="progress-fill" style="width: 0%;"><span id="progress-percent">0%</span></div>
            </div>
        </div>

        <!-- –°—á–µ—Ç—á–∏–∫ –æ—á–∫–æ–≤ -->
        <div class="score-area">
            <span>‚ûï50 –∑–∞ —Ç–∞–ø</span>
            <span id="scoreDisplay" class="score-value">0</span>
        </div>

        <!-- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ -->
        <div class="heart-container" id="heartClicker">
            <div class="pixel-heart" id="pixelHeart"></div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ) -->
        <div id="winMessage" class="secret-message">
            <div class="congrats-title">–®–∫–∞–ª–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!</div>
            <div class="main-text">
                –ì–ª–∞–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ ‚Äî –º–æ—è –ª—é–±–æ–≤—å ‚ù§Ô∏è<br>
                –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –º–æ–π –∑–∞—â–∏—Ç–Ω–∏–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.<br>
                <strong>–° 23 —Ñ–µ–≤—Ä–∞–ª—è, –º–æ—è –±—É—Å–∏–Ω–∫–∞ –∫—É–∑–µ–Ω—å–∫–∞!</strong>
            </div>
            
            <!-- –î–æ–ø –ø—Ä–∏–∑: –ø–æ—Ü–µ–ª—É–π—á–∏–∫ -->
            <button class="kiss-btn" id="kissButton">üíã –ó–ê–ë–†–ê–¢–¨ –ü–û–¶–ï–õ–£–ô–ß–ò–ö üíã</button>
            <div id="kissOutput" class="kiss-output"></div>
            <div class="small-note">(–Ω–∞–∂–∏–º–∞–π, —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å)</div>
        </div>

        <footer>—Ç—ã –º–æ–π –≥–µ—Ä–æ–π üë©‚Äç‚ù§Ô∏è‚Äçüë®</footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // –≠–ª–µ–º–µ–Ω—Ç—ã
            const heartElement = document.getElementById('pixelHeart');
            const heartContainer = document.getElementById('heartClicker');
            const progressFill = document.getElementById('progress-fill');
            const progressCounter = document.getElementById('progress-counter');
            const progressPercent = document.getElementById('progress-percent');
            const scoreSpan = document.getElementById('scoreDisplay');
            const winMessageDiv = document.getElementById('winMessage');
            const kissButton = document.getElementById('kissButton');
            const kissOutput = document.getElementById('kissOutput');

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            let currentScore = 0;
            const MAX_SCORE = 1000;
            const POINTS_PER_CLICK = 50;
            let gameFinished = false; // –ü–æ–±–µ–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞?

            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Å–µ—Ä–¥—Ü–∞
            function updateProgress() {
                if (gameFinished) return; // –±–æ–ª—å—à–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º

                // –°—á–∏—Ç–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã (–Ω–µ –±–æ–ª—å—à–µ 100)
                let percent = Math.min((currentScore / MAX_SCORE) * 100, 100);
                progressFill.style.width = percent + '%';
                progressPercent.innerText = Math.floor(percent) + '%';
                progressCounter.innerText = `${currentScore}/${MAX_SCORE}`;
                scoreSpan.innerText = currentScore;

                // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä —Å–µ—Ä–¥—Ü–∞ (–Ω–µ–º–Ω–æ–≥–æ —Ä–∞—Å—Ç–µ—Ç, –º–∞–∫—Å–∏–º—É–º +50px)
                let baseSize = 180;
                let extraSize = Math.min((percent / 100) * 60, 60); // –¥–æ 60px –¥–æ–ø
                let newSize = baseSize + extraSize;
                heartElement.style.width = newSize + 'px';
                heartElement.style.height = newSize + 'px';

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É (1000 –æ—á–∫–æ–≤)
                if (currentScore >= MAX_SCORE && !gameFinished) {
                    gameFinished = true;
                    currentScore = MAX_SCORE; // —Ñ–∏–∫—Å–∏—Ä—É–µ–º 1000
                    // –û–±–Ω–æ–≤–∏–º –¥–æ 100%
                    progressFill.style.width = '100%';
                    progressPercent.innerText = '100%';
                    progressCounter.innerText = `${MAX_SCORE}/${MAX_SCORE}`;
                    scoreSpan.innerText = MAX_SCORE;

                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–ª—å–Ω–µ–π—à–µ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
                    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–±–µ–¥–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–¥—Ü–µ
                    heartElement.classList.add('heart-win');
                    // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å pulse, –µ—Å–ª–∏ –±—ã–ª
                    heartElement.classList.remove('heart-pulse');

                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                    winMessageDiv.classList.add('show');
                }
            }

            // –§—É–Ω–∫—Ü–∏—è —Ç–∞–ø–∞
            function handleTap(e) {
                e.preventDefault(); // –¥–ª—è –º–æ–±–∏–ª—å–Ω–∏–∫–æ–≤

                if (gameFinished) {
                    // –ï—Å–ª–∏ —É–∂–µ –ø–æ–±–µ–¥–∏–ª–∏, —Ç–∞–ø –Ω–µ –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–ª—è—Ç—å –æ—á–∫–∏
                    // –Ω–æ —Å–µ—Ä–¥–µ—á–∫–æ –º–æ–∂–µ—Ç –∫—Ä—É—Ç–∏—Ç—å—Å—è –∏ —Ç–∞–∫, –Ω–æ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
                    return;
                }

                // +50 –æ—á–∫–æ–≤ (–Ω–æ –Ω–µ –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞)
                currentScore = Math.min(currentScore + POINTS_PER_CLICK, MAX_SCORE);

                // –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞
                heartElement.classList.add('heart-pulse');
                setTimeout(() => {
                    heartElement.classList.remove('heart-pulse');
                }, 200);

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å, —Ä–∞–∑–º–µ—Ä —Å–µ—Ä–¥—Ü–∞
                updateProgress();
            }

            // –í–µ—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ (–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)
            heartContainer.addEventListener('click', handleTap);
            heartContainer.addEventListener('touchstart', (e) => {
                e.preventDefault(); // —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥–≤–æ–π–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∏ –∑—É—É–º–∞
                handleTap(e);
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            updateProgress();

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∞
            kissButton.addEventListener('click', (e) => {
                e.preventDefault();
                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∏ –≤ –≤—ã–≤–æ–¥
                let currentKisses = kissOutput.innerText;
                // –ú–æ–∂–Ω–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å, –æ–≥—Ä–∞–Ω–∏—á–∏–º –¥–ª–∏–Ω—É –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã
                if (currentKisses.length > 30) {
                    kissOutput.innerText = 'üíãüíãüíãüíãüíãüíãüíãüíãüíãüíã'; // —Å–±—Ä–æ—Å –¥–æ –∫—É—á–∏
                } else {
                    kissOutput.innerText = currentKisses + 'üíã';
                }
                // –º–∞–ª–µ–Ω—å–∫–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–µ (–µ—Å–ª–∏ —É–≥–æ–¥–Ω–æ)
                if (gameFinished) {
                    // –º–æ–∂–Ω–æ —á—É—Ç–æ–∫ –ø–æ–¥–ø—Ä—ã–≥–Ω—É—Ç—å
                    heartElement.style.animation = 'none';
                    heartElement.offsetHeight; // —Ç—Ä—é–∫ –¥–ª—è —Ä–µ—Å—Ç–∞—Ä—Ç–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
                    heartElement.style.animation = 'winSpin 0.8s infinite linear, sparkle 0.6s infinite alternate';
                }
            });

            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–ª–≥–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –∏ —Ç.–ø. –Ω–µ –Ω—É–∂–Ω–∞

            // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é (–¥–ª—è Telegram Mini App)
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.expand(); // –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                Telegram.WebApp.enableClosingConfirmation(); // —Å–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            }
        });
    </script>
</body>
</html>
